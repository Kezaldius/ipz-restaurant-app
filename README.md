# Restaurant API Backend

Цей проєкт є серверною частиною (Back-End) розробленою як курсова робота з дисциплини "Інженерія програмного забезпечення" для системи управління рестораном, розробленою на Python з використанням фреймворку Flask. API надає функціонал для управління користувачами, меню, замовленнями, бронюваннями та новинами.

# Виконав
Студент 2-го курсу <br>
Група ІО-32 <br>
Національний технічний університет України <br>
«Київський політехнічний інститут імені Ігоря Сікорського» <br>
Лопушенко Кирило [Telegram](https://t.me/kezald)  

## Основні Технології

*   **Мова програмування:** Python 3.x
*   **Веб-фреймворк:** Flask
*   **Розробка REST API:** Flask-RESTx (з інтеграцією Swagger UI)
*   **База даних:** PostgreSQL
*   **ORM:** SQLAlchemy (з Flask-SQLAlchemy)
*   **Міграції БД:** Flask-Migrate (на базі Alembic)
*   **Серіалізація/Валідація:** Marshmallow (з Marshmallow-SQLAlchemy)
*   **SMS для OTP:** Twilio SDK (передбачена інтеграція)
*   **WSGI Сервер:** Gunicorn
*   **Управління конфігурацією:** python-dotenv
*   **Хостинг додатку:** Render.com
*   **Хостинг БД:** Neon.tech

## Основний Функціонал API

*   **Користувачі та Автентифікація:**
    *   Реєстрація, вхід, отримання/оновлення профілю.
    *   Скидання пароля через OTP (SMS) та класичним способом.
*   **Гості:**
    *   Підтримка дій для неавторизованих гостей (замовлення, бронювання).
*   **Меню:**
    *   CRUD для страв з детальною інформацією, категоріями, зображеннями.
    *   Управління варіантами страв (розміри, ціни).
    *   Управління групами модифікаторів та їх опціями (з впливом на ціну).
    *   Управління тегами для страв.
*   **Замовлення:**
    *   Створення замовлень для користувачів та гостей.
    *   Автоматичний розрахунок загальної суми замовлення.
    *   Перегляд деталей замовлення, оновлення статусу.
*   **Бронювання:**
    *   CRUD для столиків.
    *   Створення, перегляд та оновлення бронювань.
    *   Пошук доступних часових слотів.
    *   Пошук доступних столиків на конкретний час.
*   **Новини:**
    *   CRUD для новин та акцій.

## Документація API (Swagger)

Після запуску додатку, інтерактивна документація API (Swagger UI) доступна за адресою:
`/api/docs`

## Встановлення та Запуск

### Передумови

*   Python 3.8+
*   PostgreSQL
*   Pip (менеджер пакетів Python)

### Клонування репозиторію

```bash
git clone https://github.com/Kezaldius/ipz-restaurant-app.git
cd ipz-restaurant-app

```
### Встановлення залежностей
pip install -r requirements.txt

### Налаштування конфігурації

1. Створіть файл .env в кореневій директорії проєкту 
2. Заповніть необхідні змінні середовища: <br>
    DATABASE_URL = postgresql://user:password@host:port/database_name <br>
    FLASK_CONFIG = production <br>
    TWILIO_ACCOUNT_SID = your_twilio_sid  # Якщо Ви будете використовувати OTP <br>
    TWILIO_AUTH_TOKEN = your_twilio_token # Якщо Ви будете використовувати OTP <br>
### Міграції бази даних
Перед першим запуском або після змін у моделях даних необхідно застосувати міграції:
    flask db init  # Тільки якщо ще не ініціалізовано <br>
    flask db migrate -m "Назва міграції" <br>
    flask db upgrade <br>
### Запуск додатку для розробки
    python run.py 
    Або:
    flask run
Додаток буде доступний за адресою http://127.0.0.1:5000/
### Запуск додатку для продакшену з Gunicorn (Використовуйте бренч deploy)
    gunicorn run:app
